<div class="table-wrapper">
	<div class="table-title">
		<div class="row">
			<div class="col-sm-6">
				<h2>Manage <b>Users</b></h2>
			</div>
			<div class="col-sm-6">
				<a href="#addUserModal" class="btn btn-success" data-bs-toggle="modal"><i
						class="material-icons">&#xE147;</i> <span>Add New User</span></a>
			</div>
		</div>
	</div>
	<table class="table table-striped table-hover">
		<thead>
			<tr>
				<th>ID</th>
				<th>Name</th>
				<th>Email</th>
				<th>Age</th>
				<th>City</th>
				<th>Gender</th>
				<th>Role</th>
				<th>Actions</th>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let user of users">
				<td>{{ user.id }}</td>
				<td>{{ user.firstName }} {{ user.lastName }}</td>
				<td>{{ user.email }}</td>
				<td>{{user.age}}</td>
				<td>{{ user.city }}</td>
				<td>{{user.gender}}</td>
				<td>{{ user.role }}</td>
				<td>
					<a href="#editUserModal" class="edit" data-bs-toggle="modal" (click)="editUser(user.id)">
						<i class="material-icons" data-bs-toggle="tooltip" title="Edit">&#xE254;</i>
					</a>
					<a href="#deleteUserModal" class="delete" data-bs-toggle="modal" (click)="editUser(user.id)">
						<i class="material-icons" data-bs-toggle="tooltip" title="Delete">&#xE872;</i>
					</a>
				</td>
			</tr>
		</tbody>
	</table>
</div>

<!-- Add User Modal -->
<div id="addUserModal" class="modal fade" tabindex="-1" aria-labelledby="addUserModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg"> <!-- Adjusting modal size -->
		<div class="modal-content">
			<form (ngSubmit)="addUser()" #userForm="ngForm">
				<div class="modal-header">
					<h4 class="modal-title" id="addUserModalLabel">Add User</h4>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true"></button>
				</div>
				<div class="modal-body">
					<div class="row">
						<!-- First Name -->
						<div class="col-md-6">
							<div class="form-group">
								<label for="firstName">First Name</label>
								<input id="firstName" type="text" class="form-control" [(ngModel)]="newUser.firstName"
									name="firstName" required>
							</div>
						</div>

						<!-- Last Name -->
						<div class="col-md-6">
							<div class="form-group">
								<label for="lastName">Last Name</label>
								<input id="lastName" type="text" class="form-control" [(ngModel)]="newUser.lastName"
									name="lastName" required>
							</div>
						</div>
					</div>

					<div class="row">
						<!-- Email -->
						<div class="col-md-6">
							<div class="form-group">
								<label for="email">Email</label>
								<input id="email" type="email" class="form-control" [(ngModel)]="newUser.email"
									name="email" required>
							</div>
						</div>

						<!-- City -->
						<div class="col-md-6">
							<div class="form-group">
								<label for="city">City</label>
								<input id="city" type="text" class="form-control" [(ngModel)]="newUser.city" name="city"
									required>
							</div>
						</div>
					</div>

					<div class="row">
						<!-- Age -->
						<div class="col-md-6">
							<div class="form-group">
								<label for="age">Age</label>
								<input id="age" type="number" class="form-control" [(ngModel)]="newUser.age" name="age"
									required>
							</div>
						</div>

						<!-- Gender -->
						<div class="col-md-6">
							<div class="form-group">
								<label for="gender">Gender</label>
								<select id="gender" class="form-control" [(ngModel)]="newUser.gender" name="gender"
									required>
									<option value="Male">Male</option>
									<option value="Female">Female</option>
									<option value="Other">Other</option>
								</select>
							</div>
						</div>
					</div>

					<div class="row">
						<!-- Role -->
						<div class="col-md-6">
							<div class="form-group">
								<label for="role">Role</label>
								<select id="role" class="form-control" [(ngModel)]="newUser.role" name="role" required>
									<option *ngFor="let role of roles" [value]="role">{{ role }}</option>
								</select>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<input type="button" class="btn btn-default" data-bs-dismiss="modal" value="Cancel">
					<input type="submit" class="btn btn-success" value="Add User" [disabled]="!userForm.valid">
				</div>
			</form>
		</div>
	</div>
</div>


<!-- Edit User Modal -->
<div id="editUserModal" class="modal fade">
	<div class="modal-dialog">
		<div class="modal-content">
			<form (ngSubmit)="updateUser()">
				<div class="modal-header">
					<h4 class="modal-title">Edit User</h4>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true"></button>
				</div>
				<div class="modal-body">
					<div class="form-group">
						<label for="editFirstName">First Name</label>
						<input id="editFirstName" type="text" [(ngModel)]="selectedUser.firstName" class="form-control"
							name="firstName" required>
					</div>
					<div class="form-group">
						<label for="editLastName">Last Name</label>
						<input id="editLastName" type="text" class="form-control" [(ngModel)]="selectedUser.lastName"
							name="lastName" required>
					</div>
					<div class="form-group">
						<label for="editAge">Age</label>
						<input id="editAge" type="age" class="form-control" [(ngModel)]="selectedUser.age" name="age"
							required>
					</div>
					<div class="form-group">
						<label for="editEmail">Email</label>
						<input id="editEmail" type="email" class="form-control" [(ngModel)]="selectedUser.email"
							name="email" required>
					</div>
					<div class="form-group">
						<label for="editCity">City</label>
						<input id="editCity" type="text" class="form-control" [(ngModel)]="selectedUser.city"
							name="city" required>
					</div>
					<div class="form-group">
						<label for="editCity">Gender</label>
						<select id="editCity" type="text" class="form-control" [(ngModel)]="selectedUser.gender"
							name="gender" required>
							<option value="Male">Male</option>
							<option value="Female">Female</option>
							<option value="Other">Other</option>
						</select>
					</div>
					<div class="form-group">
						<label for="editRole">Role</label>
						<select id="editRole" class="form-control" [(ngModel)]="selectedUser.role" name="role" required>
							<option *ngFor="let role of roles" [value]="role">{{ role }}</option>
						</select>
					</div>
				</div>
				<div class="modal-footer">
					<input type="button" class="btn btn-default" data-bs-dismiss="modal" value="Cancel">
					<input type="submit" class="btn btn-info" value="Save Changes">
				</div>
			</form>
		</div>
	</div>
</div>

<!-- Delete User Modal -->
<div id="deleteUserModal" class="modal fade">
	<div class="modal-dialog">
		<div class="modal-content">
			<form (ngSubmit)="deleteUser(selectedUser.id)">
				<div class="modal-header">
					<h4 class="modal-title">Delete User</h4>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true"></button>
				</div>
				<div class="modal-body">
					<p>Are you sure you want to delete this user?</p>
					<p class="text-warning"><small>This action cannot be undone.</small></p>
				</div>
				<div class="modal-footer">
					<input type="button" class="btn btn-default" data-bs-dismiss="modal" value="Cancel">
					<input type="submit" class="btn btn-danger" value="Delete">
				</div>
			</form>
		</div>
	</div>
</div>